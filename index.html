<!DOCTYPE html>
<html>
  <head>
    <title>Congregate</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/png" href="./assets/images/subway.png">
    <link rel="stylesheet" type="text/css" href="./assets/style.css">
    <link rel="stylesheet" type="text/css" href="./assets/reset.css">
    <script src="https://kit.fontawesome.com/35f2d04978.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Kanit" rel="stylesheet">
    <!-- <script src="https://www.gstatic.com/firebasejs/5.9.4/firebase.js"></script> -->
    <!-- <script src="https://unpkg.com/axios/dist/axios.min.js"></script> -->
    <!-- <script src="lib/station_coords.js"></script> -->
    <script src="lib/final_data.js"></script>
    <!-- <script src="lib/turnstile_190921.js"></script>
      <script src="lib/station_coord_generator.js"></script> -->
      <script src="lib/map_create.js"></script>
      <script src="lib/map_style.js"></script>
      <script 
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAgudF818cVj9RRgX_oGbCYyungikoaZ3U&callback=initMap&libraries=visualization"
      async defer>
    </script>
  </head>
  <body>
    <div class='main-strip'>
      <div class='top'>
        <h1>
          CONGREGATE
        </h1>
      </div>
      <div class='main'> 
        <div class='left'>
          <button class='info-modal-btn' id='info-modal-btn' onclick='popModal()'>
            <i class="fas fa-question-circle"></i>
          </button>
          <a class='url-links' href='https://mikolas2788.github.io/'>
            <i class="fas fa-home"></i>
          </a>
          <a class='url-links' href='https://github.com/mikolas2788'>
            <i class='fab fa-github'></i>
          </a>
          <a class='url-links' href='https://www.linkedin.com/in/myron-yook-97368197/'>
            <i class='fab fa-linkedin'></i>
          </a>
          <a class='url-links' href='https://angel.co/myron-yook'>
            <i class="fab fa-angellist"></i>
          </a>
        </div>
        <div id="map">
        </div>
        <div class='selectors'>
          <button class='autoplay-btn' id='autoplay-btn' onclick='autoPlay()'>
            <img src="./assets/images/autoplay1.png">
          </button>
          <select required class='train-selector' id='train-selector' onchange='heatMapRender()'>  
            <!-- <option value='All'>All Trains</option> -->
            <option value='All' default>All Trains</option>
            <option value='1'>1</option>
            <option value='2'>2</option>
            <option value='3'>3</option>
            <option value='4'>4</option>
            <option value='5'>5</option>
            <option value='6'>6</option>
            <option value='7'>7</option>
            <option value='A'>A</option>
            <option value='B'>B</option>
            <option value='C'>C</option>
            <option value='D'>D</option>
            <option value='E'>E</option>
            <option value='F'>F</option>
            <option value='G'>G</option>
          </select>
          <select required class='date-selector' id='date-selector' onchange='heatMapRender()'>  
            <option value='' hidden>Date</option>
            <option value='09/14/2019'>09/14/2019</option>
            <option value='09/15/2019'>09/15/2019</option>
            <option value='09/16/2019'>09/16/2019</option>
            <option value='09/17/2019'>09/17/2019</option>
            <option value='09/18/2019'>09/18/2019</option>
            <option value='09/19/2019'>09/19/2019</option>
            <option value='09/20/2019'>09/20/2019</option>
          </select>
          <select required class='timestamp-selector' id='timestamp-selector' onchange='heatMapRender()'>  
            <option value='' hidden>Time</option>
            <option value='00:00 - 04:00'>00:00 - 04:00</option>
            <option value='04:00 - 08:00'>04:00 - 08:00</option>
            <option value='08:00 - 12:00'>08:00 - 12:00</option>
            <option value='12:00 - 16:00'>12:00 - 16:00</option>
            <option value='16:00 - 20:00'>16:00 - 20:00</option>
            <option value='20:00 - 00:00'>20:00 - 00:00</option>
          </select>
        </div>
        <!-- <div class='dropdown-buttons'> 
          <div class='date-dropdown'>
            <button class='date-dropdown-button'>Dates</button>
            <div class='date-dropdown-content'>
              <button class='date-content-unit'>09/14/2019</button>
              <button class='date-content-unit'>09/15/2019</button>
              <button class='date-content-unit'>09/16/2019</button>
              <button class='date-content-unit'>09/17/2019</button>
              <button class='date-content-unit'>09/18/2019</button>
              <button class='date-content-unit'>09/19/2019</button>
              <button class='date-content-unit'>09/20/2019</button>
            </div>
          </div>
          <div class='timestamp-dropdown'>
            <button class='timestamp-dropdown-button'>Time</button>
            <div class='timestamp-dropdown-content'>
              <button class='timestamp-content-unit'>00:00 - 04:00</button>
              <button class='timestamp-content-unit'>04:00 - 08:00</button>
              <button class='timestamp-content-unit'>08:00 - 12:00</button>
              <button class='timestamp-content-unit'>12:00 - 16:00</button>
              <button class='timestamp-content-unit'>16:00 - 20:00</button>
              <button class='timestamp-content-unit'>20:00 - 00:00</button>
            </div>
          </div> 
        </div> -->
      </div>
      <div class='info-modal' id='info-modal'>
        <div class='info-content'>
          <span class='info-close'>&times;</span>
          <p>Congregate is a data visualization of NYC’s MTA turnstile data set, which tracks the amount of people entering and
          exiting their stations on a weekly basis. This site’s purpose is to provide the general public and small business owners
          with an accessible visualization of where and when people congregate to better target their business. Uber drivers, food
          truck owners, and organizations looking to advertise could benefit from this endeavor. Congregate is a javascript
          project utilizing Google maps and heatmap API, HTML and CSS to render a seamless and aesthetic platform for potential
          users.
          <br><br>
          Congregate is still a work in progress as of October 2019. Some updates to be expected in the coming weeks include
          autoplay feature, addition of entirety of September and exit data, and stylistic improvements.
          <br><br>
          As the data utilized is currently static, long term goals would be to have a seamless automatic process in which
          Congregate will extract, parse and model the latest data, to provide recent and relevant data.
          <!-- <br><br> -->
          <!-- The greatest challenge of this project had to do with the data set itself. MTA’s turnstile data is unstandardized with
          little documentation. For instance, the data set would normally provide data in 4 hour sets, but would randomly
          begin/end in odd intervals such as 8:32. The counters at a given turnstile may also reset, but there is no set pattern.
          Given the magnitude of the data set’s 200,00 lines of data, and limited documentation, it was a lengthy journey of
          incurring technical debt without the knowledge of these anomalies or understanding MTA’s rationale for them.
          <br><br>
          The next largest challenge was trying to find a programmatic solution to the dataset not containing the necessary
          geographic coordinates to display the heatmap. There exists other datasets that does contain station coordinate data,
          but there was no common key I could utilize to connect the two data sets. While I could have manually changed the names
          of 400+ stations to ensure they’d match, this would not be sustainable for every time I’d be adding additional datasets.
          I have temporarily chosen to mitigate this issue by utilizing Chris Whong’s publicly provided station coordinates, but
          had previously attempted Google’s Geocode API along with Firebase, Excel’s built-in approximate/fuzzy matching, and
          writing javascript scripts to match similar enough station names. Unfortunately, they don’t capture the fully
          programmatic solution I have in mind.
          <br><br>
          I would like to recognize Nick Werner for his much needed assistance in parsing the unpalatable dataset and Chris
          Whong’s coordinate data on his github.</p> -->
        </div>
      </div>
    </div>
  </body>
    <script src="dist/bundle.js"></script>
    <script src="lib/heatmapButtons.js"></script>
</html>